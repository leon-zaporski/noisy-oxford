<!DOCTYPE html>
<html>
  
<head>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
  
<body>
  
<div id="tester" style="width:80%;height:80%;"></div>  
<input type="range" id="myRange" value="0" step="0.001" min="-2" max="2" oninput="myFunction()">

<p id="demo"></p>

<script type="text/javascript" src="fft.js"></script>
	
<script>
//box muller transform
function randn_bm() {
    var u = 0, v = 0;
    while(u === 0) u = Math.random(); //Converting [0,1) to (0,1)
    while(v === 0) v = Math.random();
    return Math.sqrt( -2.0 * Math.log( u ) ) * Math.cos( 2.0 * Math.PI * v );
}

function spectrum(array1) {
    var imag = Array.apply(null, Array(array1.length)).map(Number.prototype.valueOf,0);
    transform(array1,imag);
    return math.square(array1) + math.square(imag)
}

	
function myFunction() {
  var x = document.getElementById("myRange").value;
  document.getElementById("demo").innerHTML = x;
  
  var lenarr = 44100
  var indices = Array.from(Array(lenarr).keys())
  var white_n = [];
	
  for (var i = 0; i < indices.length; i++) {
   	   white_n.push(randn_bm());
  }	
	
  var trace1 = { x: indices,
 		 y: white_n,
  		 type: 'scatter'
		};
  var trace2 = { x: indices,
 		 y: spectrum(white_n),
  		 type: 'scatter'
		};
  TESTER = document.getElementById('tester');
  var data = [trace1, trace2];
  var layout = { grid: {rows: 1, columns: 2, pattern: 'independent'}, };
  Plotly.newPlot(TESTER, data, layout, {margin: { t: 0 }} );
}

</script>

</body>
</html>
